<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prolog Matrix Interface</title>
    <script src="assets/js/tailwind.js"></script>
    <script src="assets/js/interact.js"></script>
    <style>
        /* A more modern, dark scrollbar for a better integrated look */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #111827; } /* bg-gray-900 */
        ::-webkit-scrollbar-thumb { background: #374151; border-radius: 4px; } /* bg-gray-700 */
        ::-webkit-scrollbar-thumb:hover { background: #4b5563; } /* bg-gray-600 */
        
        /* Ensure textarea and highlight div have the same styling for perfect alignment */
        .highlighting-area, .editing-area {
            padding: 10px;
            font-size: 1rem;
            line-height: 1.5rem;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            white-space: pre-wrap; /* Allow wrapping */
            word-wrap: break-word; /* Break long words */
        }
        
        .editing-area {
            color: transparent;
            caret-color: white;
            background-color: transparent;
            resize: none;
            overflow: hidden;
        }

        #floating-console {
            transform: translate(0, 0);
            touch-action: none;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300 font-sans h-screen overflow-hidden">

    <!-- Main Content Layout (Matrix and Log) -->
    <div class="flex h-full gap-4 p-4">

        <!-- Left Panel: Matrix Viewer -->
        <div class="w-2/3 bg-gray-800 rounded-lg shadow-lg border border-gray-700 flex flex-col p-6">
            <div class="flex items-center justify-between border-b border-gray-600 pb-3 mb-6">
                 <h2 class="text-xl font-bold text-white">Matrix Viewer</h2>
                 <div class="flex items-center gap-2">
                    <span id="status-light" class="w-4 h-4 rounded-full bg-red-500 transition-colors duration-500"></span>
                    <span id="status-text" class="font-medium text-gray-400">Disconnected</span>
                </div>
            </div>
            <!-- Matrix will be rendered here -->
            <div id="matrix-container" class="flex-grow flex items-center justify-center text-4xl">
                <span class="text-gray-500">Awaiting matrix data...</span>
            </div>
        </div>

        <!-- Right Panel: Log Viewer -->
        <div class="w-1/3 bg-gray-800 rounded-lg shadow-lg border border-gray-700 flex flex-col overflow-hidden">
             <h2 class="text-lg font-semibold text-white p-3 border-b border-gray-700">Log</h2>
             <div id="log-container" class="flex-grow p-4 overflow-y-auto space-y-3 text-xs font-mono">
                 <div class="text-gray-500 italic">Connecting to Prolog server...</div>
             </div>
        </div>
    </div>

    <!-- Floating Window: Prolog Console -->
    <div id="floating-console" class="absolute top-24 right-8 w-[450px] h-[300px] bg-gray-800 rounded-lg shadow-2xl border border-gray-700 flex flex-col z-10">
        <h2 id="console-header" class="text-lg font-semibold text-white p-3 border-b border-gray-700 cursor-move">Prolog Console</h2>
        <div class="flex-grow p-4 flex flex-col overflow-hidden">
            <div class="flex-grow flex relative overflow-y-auto">
                <span class="text-green-400 mr-2 whitespace-nowrap pt-2.5 font-mono">?-</span>
                <div class="relative w-full h-full">
                    <pre id="highlighting-layer" class="highlighting-area absolute inset-0 pointer-events-none"></pre>
                    <textarea id="console-input" spellcheck="false" class="editing-area absolute inset-0 w-full h-full bg-transparent text-transparent focus:outline-none"></textarea>
                </div>
            </div>
             <button id="submit-button" class="mt-3 w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-200">
                Execute Query (Ctrl+Enter)
            </button>
        </div>
    </div>

    <script src="assets/js/matrix.js"></script>
</body>
</html>
